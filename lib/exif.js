const _0x1ac490=_0x59c3;function _0x1fc2(){const _0x3dd475=['length','writeUIntLE','.jpg','randomBytes','toString','383220kqleBS','exports','join','toFormat','-vf','load','crypto','-loop','2308649zJupur','237170yXmhND','https://github.com/mruniquehacker/Knightbot','-preset','addOutputOptions','readFileSync','00:00:05','packname','198MAbWZA','test','end','unlinkSync','webp','error','writeFileSync','-vcodec','00:00:00','utf-8','3042976ZuZrWk','193505FRdkLz','217236LUzepN','from','.webp','exif','12xWocMk','stringify','fluent-ffmpeg','.mp4','data','libwebp','path','categories','-ss','-vsync','save','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','readUIntLE','author','124398LpSVun','35OylojR','concat','Image','mimetype'];_0x1fc2=function(){return _0x3dd475;};return _0x1fc2();}function _0x59c3(_0x310f8a,_0x398c02){_0x310f8a=_0x310f8a-0x155;const _0x1fc244=_0x1fc2();let _0x59c38c=_0x1fc244[_0x310f8a];return _0x59c38c;}(function(_0x35516d,_0x421a91){const _0x1b3842=_0x59c3,_0xc0a10f=_0x35516d();while(!![]){try{const _0xf6198f=-parseInt(_0x1b3842(0x167))/0x1+parseInt(_0x1b3842(0x184))/0x2+-parseInt(_0x1b3842(0x17a))/0x3*(-parseInt(_0x1b3842(0x16c))/0x4)+parseInt(_0x1b3842(0x17b))/0x5*(-parseInt(_0x1b3842(0x168))/0x6)+-parseInt(_0x1b3842(0x18c))/0x7+parseInt(_0x1b3842(0x166))/0x8+parseInt(_0x1b3842(0x15c))/0x9*(parseInt(_0x1b3842(0x155))/0xa);if(_0xf6198f===_0x421a91)break;else _0xc0a10f['push'](_0xc0a10f['shift']());}catch(_0xd0ca48){_0xc0a10f['push'](_0xc0a10f['shift']());}}}(_0x1fc2,0x6bc38));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(_0x1ac490(0x18a)),ff=require(_0x1ac490(0x16e)),webp=require('node-webpmux'),path=require(_0x1ac490(0x172));async function imageToWebp(_0x18767d){const _0x2c2647=_0x1ac490,_0x23adda=path['join'](tmpdir(),Crypto[_0x2c2647(0x182)](0x6)[_0x2c2647(0x178)](0x0,0x6)[_0x2c2647(0x183)](0x24)+'.webp'),_0x5466cf=path[_0x2c2647(0x186)](tmpdir(),Crypto[_0x2c2647(0x182)](0x6)[_0x2c2647(0x178)](0x0,0x6)['toString'](0x24)+_0x2c2647(0x181));fs[_0x2c2647(0x162)](_0x5466cf,_0x18767d),await new Promise((_0x30cdf4,_0x28c04a)=>{const _0x3ddf90=_0x2c2647;ff(_0x5466cf)['on'](_0x3ddf90(0x161),_0x28c04a)['on']('end',()=>_0x30cdf4(!![]))[_0x3ddf90(0x158)]([_0x3ddf90(0x163),_0x3ddf90(0x171),_0x3ddf90(0x188),_0x3ddf90(0x177)])['toFormat'](_0x3ddf90(0x160))[_0x3ddf90(0x176)](_0x23adda);});const _0x2b9614=fs[_0x2c2647(0x159)](_0x23adda);return fs['unlinkSync'](_0x23adda),fs[_0x2c2647(0x15f)](_0x5466cf),_0x2b9614;}async function videoToWebp(_0x5cdb1c){const _0x2c645b=_0x1ac490,_0x2d69aa=path[_0x2c645b(0x186)](tmpdir(),Crypto['randomBytes'](0x6)[_0x2c645b(0x178)](0x0,0x6)['toString'](0x24)+'.webp'),_0x5a6512=path['join'](tmpdir(),Crypto[_0x2c645b(0x182)](0x6)[_0x2c645b(0x178)](0x0,0x6)[_0x2c645b(0x183)](0x24)+_0x2c645b(0x16f));fs['writeFileSync'](_0x5a6512,_0x5cdb1c),await new Promise((_0x20beb3,_0x3900cd)=>{const _0x45970f=_0x2c645b;ff(_0x5a6512)['on'](_0x45970f(0x161),_0x3900cd)['on'](_0x45970f(0x15e),()=>_0x20beb3(!![]))[_0x45970f(0x158)](['-vcodec','libwebp',_0x45970f(0x188),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse',_0x45970f(0x18b),'0',_0x45970f(0x174),_0x45970f(0x164),'-t',_0x45970f(0x15a),_0x45970f(0x157),'default','-an',_0x45970f(0x175),'0'])[_0x45970f(0x187)](_0x45970f(0x160))[_0x45970f(0x176)](_0x2d69aa);});const _0x10c3de=fs[_0x2c645b(0x159)](_0x2d69aa);return fs[_0x2c645b(0x15f)](_0x2d69aa),fs[_0x2c645b(0x15f)](_0x5a6512),_0x10c3de;}async function writeExifImg(_0x3e6b17,_0x5cfd7e){const _0x4f1ade=_0x1ac490;let _0x29a1f6=await imageToWebp(_0x3e6b17);const _0x1a01e6=path[_0x4f1ade(0x186)](tmpdir(),Crypto[_0x4f1ade(0x182)](0x6)[_0x4f1ade(0x178)](0x0,0x6)[_0x4f1ade(0x183)](0x24)+_0x4f1ade(0x16a)),_0x15bc51=path[_0x4f1ade(0x186)](tmpdir(),Crypto['randomBytes'](0x6)[_0x4f1ade(0x178)](0x0,0x6)[_0x4f1ade(0x183)](0x24)+'.webp');fs[_0x4f1ade(0x162)](_0x1a01e6,_0x29a1f6);if(_0x5cfd7e[_0x4f1ade(0x15b)]||_0x5cfd7e[_0x4f1ade(0x179)]){const _0x29690c=new webp[(_0x4f1ade(0x17d))](),_0x4d0246={'sticker-pack-id':_0x4f1ade(0x156),'sticker-pack-name':_0x5cfd7e[_0x4f1ade(0x15b)],'sticker-pack-publisher':_0x5cfd7e[_0x4f1ade(0x179)],'emojis':_0x5cfd7e['categories']?_0x5cfd7e['categories']:['']},_0xd68062=Buffer[_0x4f1ade(0x169)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x4d6eeb=Buffer[_0x4f1ade(0x169)](JSON[_0x4f1ade(0x16d)](_0x4d0246),_0x4f1ade(0x165)),_0x48c55b=Buffer[_0x4f1ade(0x17c)]([_0xd68062,_0x4d6eeb]);return _0x48c55b['writeUIntLE'](_0x4d6eeb[_0x4f1ade(0x17f)],0xe,0x4),await _0x29690c['load'](_0x1a01e6),fs[_0x4f1ade(0x15f)](_0x1a01e6),_0x29690c['exif']=_0x48c55b,await _0x29690c[_0x4f1ade(0x176)](_0x15bc51),_0x15bc51;}}async function writeExifVid(_0x3c727f,_0x134a89){const _0x30496a=_0x1ac490;let _0x4370b9=await videoToWebp(_0x3c727f);const _0x19e9fd=path[_0x30496a(0x186)](tmpdir(),Crypto[_0x30496a(0x182)](0x6)[_0x30496a(0x178)](0x0,0x6)[_0x30496a(0x183)](0x24)+_0x30496a(0x16a)),_0x5d40ab=path[_0x30496a(0x186)](tmpdir(),Crypto[_0x30496a(0x182)](0x6)[_0x30496a(0x178)](0x0,0x6)[_0x30496a(0x183)](0x24)+'.webp');fs[_0x30496a(0x162)](_0x19e9fd,_0x4370b9);if(_0x134a89['packname']||_0x134a89[_0x30496a(0x179)]){const _0x9ddc57=new webp[(_0x30496a(0x17d))](),_0x49f3e3={'sticker-pack-id':'https://github.com/mruniquehacker/Knightbot','sticker-pack-name':_0x134a89['packname'],'sticker-pack-publisher':_0x134a89[_0x30496a(0x179)],'emojis':_0x134a89[_0x30496a(0x173)]?_0x134a89['categories']:['']},_0x23f80a=Buffer[_0x30496a(0x169)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x175e29=Buffer[_0x30496a(0x169)](JSON[_0x30496a(0x16d)](_0x49f3e3),_0x30496a(0x165)),_0x16e5f1=Buffer[_0x30496a(0x17c)]([_0x23f80a,_0x175e29]);return _0x16e5f1[_0x30496a(0x180)](_0x175e29[_0x30496a(0x17f)],0xe,0x4),await _0x9ddc57['load'](_0x19e9fd),fs[_0x30496a(0x15f)](_0x19e9fd),_0x9ddc57[_0x30496a(0x16b)]=_0x16e5f1,await _0x9ddc57[_0x30496a(0x176)](_0x5d40ab),_0x5d40ab;}}async function writeExif(_0x472a8a,_0x46a338){const _0x47e45b=_0x1ac490;let _0xf3bf7=/webp/[_0x47e45b(0x15d)](_0x472a8a[_0x47e45b(0x17e)])?_0x472a8a[_0x47e45b(0x170)]:/image/[_0x47e45b(0x15d)](_0x472a8a['mimetype'])?await imageToWebp(_0x472a8a[_0x47e45b(0x170)]):/video/[_0x47e45b(0x15d)](_0x472a8a[_0x47e45b(0x17e)])?await videoToWebp(_0x472a8a['data']):'';const _0x330e60=path['join'](tmpdir(),Crypto[_0x47e45b(0x182)](0x6)[_0x47e45b(0x178)](0x0,0x6)[_0x47e45b(0x183)](0x24)+_0x47e45b(0x16a)),_0x43aea1=path[_0x47e45b(0x186)](tmpdir(),Crypto[_0x47e45b(0x182)](0x6)[_0x47e45b(0x178)](0x0,0x6)['toString'](0x24)+_0x47e45b(0x16a));fs[_0x47e45b(0x162)](_0x330e60,_0xf3bf7);if(_0x46a338[_0x47e45b(0x15b)]||_0x46a338[_0x47e45b(0x179)]){const _0x1e85da=new webp[(_0x47e45b(0x17d))](),_0x560af0={'sticker-pack-id':_0x47e45b(0x156),'sticker-pack-name':_0x46a338['packname'],'sticker-pack-publisher':_0x46a338[_0x47e45b(0x179)],'emojis':_0x46a338[_0x47e45b(0x173)]?_0x46a338['categories']:['']},_0x4a77a2=Buffer[_0x47e45b(0x169)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x706520=Buffer[_0x47e45b(0x169)](JSON['stringify'](_0x560af0),_0x47e45b(0x165)),_0x31c64a=Buffer[_0x47e45b(0x17c)]([_0x4a77a2,_0x706520]);return _0x31c64a[_0x47e45b(0x180)](_0x706520[_0x47e45b(0x17f)],0xe,0x4),await _0x1e85da[_0x47e45b(0x189)](_0x330e60),fs[_0x47e45b(0x15f)](_0x330e60),_0x1e85da['exif']=_0x31c64a,await _0x1e85da[_0x47e45b(0x176)](_0x43aea1),_0x43aea1;}}module[_0x1ac490(0x185)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};