const _0x509c66=_0x36a6;(function(_0x4276db,_0x5d8530){const _0x56f09e=_0x36a6,_0x380c35=_0x4276db();while(!![]){try{const _0x2682fa=-parseInt(_0x56f09e(0xd7))/0x1+parseInt(_0x56f09e(0xf8))/0x2+parseInt(_0x56f09e(0xf1))/0x3+parseInt(_0x56f09e(0x101))/0x4+-parseInt(_0x56f09e(0xe2))/0x5+-parseInt(_0x56f09e(0x103))/0x6+parseInt(_0x56f09e(0xd2))/0x7;if(_0x2682fa===_0x5d8530)break;else _0x380c35['push'](_0x380c35['shift']());}catch(_0x2bbc2e){_0x380c35['push'](_0x380c35['shift']());}}}(_0x525c,0x619f4));const {spawn}=require(_0x509c66(0xdf)),fs=require('fs'),path=require(_0x509c66(0xe6)),{writeExifImg,writeExifVid}=require('../lib/exif'),settings=require(_0x509c66(0xf3));function _0x525c(){const _0x550ac0=['replace','adReply','slice','platform','ffmpeg','Error\x20generating\x20local\x20sticker:','6710970CirbzB','concat','ffmpeg\x20exited\x20with\x20code\x20','data','\x27:text=\x27','45056qkahaQ','-frames:v','\x27:fontcolor=red:borderw=2:bordercolor=black@0.6:fontsize=56:x=(w-text_w)/2:y=(h-text_h)/2:enable=\x27lt(mod(t,','+faststart+frag_keyframe+empty_moov','-movflags','color=c=#00000000:s=512x512','Please\x20provide\x20text\x20after\x20the\x20.attp\x20command.','Failed\x20to\x20generate\x20the\x20sticker\x20locally.','child_process','sendMessage','stdout','3475385PLxaLv','drawtext=fontfile=\x27','\x27:fontcolor=white:fontsize=56:borderw=2:bordercolor=black@0.6:x=(w-text_w)/2:y=(h-text_h)/2','win32','path',':r=20','),0.1)\x27','join','push','lavfi','C:/Windows/Fonts/arialbd.ttf','text','/usr/share/fonts/truetype/dejavu/DejaVuSans-Bold.ttf','close','yuv420p','19659YOiwiG','-c:v','../settings','-pix_fmt','libx264','stderr','error','117476NRSLqi','extendedTextMessage','image2','unlinkSync','),0.1,0.2)\x27','readFileSync','message','toString','pipe:1','2000772EimAIn','\x27:fontcolor=blue:borderw=2:bordercolor=black@0.6:fontsize=56:x=(w-text_w)/2:y=(h-text_h)/2:enable=\x27between(mod(t,','2305206gekfeg','mp4'];_0x525c=function(){return _0x550ac0;};return _0x525c();}async function attpCommand(_0x2a7ba2,_0x2be498,_0x2ed5b3){const _0x2284f0=_0x509c66,_0x4bd8bb=_0x2ed5b3[_0x2284f0(0xfe)]['conversation']||_0x2ed5b3['message'][_0x2284f0(0xf9)]?.[_0x2284f0(0xed)]||'',_0x4e12b8=_0x4bd8bb['split']('\x20')[_0x2284f0(0x107)](0x1)[_0x2284f0(0xe9)]('\x20');if(!_0x4e12b8){await _0x2a7ba2[_0x2284f0(0xe0)](_0x2be498,{'text':_0x2284f0(0xdd),'contextInfo':{'externalAdReply':settings[_0x2284f0(0x106)]}},{'quoted':_0x2ed5b3});return;}try{const _0x512702=await renderBlinkingVideoWithFfmpeg(_0x4e12b8),_0x395416=await writeExifVid(_0x512702,{'packname':'ZENTROX\x20BOT'}),_0x184003=fs[_0x2284f0(0xfd)](_0x395416);try{fs[_0x2284f0(0xfb)](_0x395416);}catch(_0x2e4c37){}await _0x2a7ba2[_0x2284f0(0xe0)](_0x2be498,{'sticker':_0x184003,'contextInfo':{'externalAdReply':settings['adReply']}},{'quoted':_0x2ed5b3});}catch(_0x64b8fe){console['error'](_0x2284f0(0xd1),_0x64b8fe),await _0x2a7ba2[_0x2284f0(0xe0)](_0x2be498,{'text':_0x2284f0(0xde),'contextInfo':{'externalAdReply':settings[_0x2284f0(0x106)]}},{'quoted':_0x2ed5b3});}}module['exports']=attpCommand;function renderTextToPngWithFfmpeg(_0x1cdef1){return new Promise((_0x495144,_0x237a12)=>{const _0x30ba82=_0x36a6,_0x38396b=process['platform']===_0x30ba82(0xe5)?_0x30ba82(0xec):_0x30ba82(0xee),_0x364937=_0x4722c2=>_0x4722c2[_0x30ba82(0x105)](/\\/g,'\x5c\x5c')['replace'](/:/g,'\x5c:')[_0x30ba82(0x105)](/'/g,'\x5c\x27')[_0x30ba82(0x105)](/\[/g,'\x5c[')[_0x30ba82(0x105)](/\]/g,'\x5c]')[_0x30ba82(0x105)](/%/g,'\x5c%'),_0x4c2b82=_0x364937(_0x1cdef1),_0x4c520e=process[_0x30ba82(0x108)]===_0x30ba82(0xe5)?_0x38396b[_0x30ba82(0x105)](/\\/g,'/')['replace'](':','\x5c:'):_0x38396b,_0x228e7c=['-y','-f','lavfi','-i',_0x30ba82(0xdc),'-vf',_0x30ba82(0xe3)+_0x4c520e+'\x27:text=\x27'+_0x4c2b82+_0x30ba82(0xe4),_0x30ba82(0xd8),'1','-f',_0x30ba82(0xfa),_0x30ba82(0x100)],_0x143c40=spawn(_0x30ba82(0x109),_0x228e7c),_0x33c918=[],_0x4c5a26=[];_0x143c40[_0x30ba82(0xe1)]['on']('data',_0x44aa8c=>_0x33c918[_0x30ba82(0xea)](_0x44aa8c)),_0x143c40[_0x30ba82(0xf6)]['on']('data',_0x22c423=>_0x4c5a26['push'](_0x22c423)),_0x143c40['on'](_0x30ba82(0xf7),_0x237a12),_0x143c40['on'](_0x30ba82(0xef),_0x4684fe=>{const _0x3f9084=_0x30ba82;if(_0x4684fe===0x0)return _0x495144(Buffer[_0x3f9084(0xd3)](_0x33c918));_0x237a12(new Error(Buffer[_0x3f9084(0xd3)](_0x4c5a26)[_0x3f9084(0xff)]()||'ffmpeg\x20exited\x20with\x20code\x20'+_0x4684fe));});});}function _0x36a6(_0x4e2f05,_0x2a2b6c){_0x4e2f05=_0x4e2f05-0xd1;const _0x525c6a=_0x525c();let _0x36a605=_0x525c6a[_0x4e2f05];return _0x36a605;}function renderBlinkingVideoWithFfmpeg(_0x14e29f){return new Promise((_0x591411,_0x1af15a)=>{const _0x50cd7d=_0x36a6,_0x4fef53=process[_0x50cd7d(0x108)]==='win32'?'C:/Windows/Fonts/arialbd.ttf':'/usr/share/fonts/truetype/dejavu/DejaVuSans-Bold.ttf',_0x3b148e=_0x21e212=>_0x21e212[_0x50cd7d(0x105)](/\\/g,'\x5c\x5c')[_0x50cd7d(0x105)](/:/g,'\x5c:')['replace'](/,/g,'\x5c,')['replace'](/'/g,'\x5c\x27')[_0x50cd7d(0x105)](/\[/g,'\x5c[')[_0x50cd7d(0x105)](/\]/g,'\x5c]')['replace'](/%/g,'\x5c%'),_0x8672a1=_0x3b148e(_0x14e29f),_0x30ca63=process[_0x50cd7d(0x108)]===_0x50cd7d(0xe5)?_0x4fef53[_0x50cd7d(0x105)](/\\/g,'/')['replace'](':','\x5c:'):_0x4fef53,_0x4d1909=0.3,_0x35cdc0=1.8,_0x3b8a68=_0x50cd7d(0xe3)+_0x30ca63+_0x50cd7d(0xd6)+_0x8672a1+_0x50cd7d(0xd9)+_0x4d1909+_0x50cd7d(0xe8),_0x4c2ab3=_0x50cd7d(0xe3)+_0x30ca63+'\x27:text=\x27'+_0x8672a1+_0x50cd7d(0x102)+_0x4d1909+_0x50cd7d(0xfc),_0x52e3b4=_0x50cd7d(0xe3)+_0x30ca63+_0x50cd7d(0xd6)+_0x8672a1+'\x27:fontcolor=green:borderw=2:bordercolor=black@0.6:fontsize=56:x=(w-text_w)/2:y=(h-text_h)/2:enable=\x27gte(mod(t,'+_0x4d1909+'),0.2)\x27',_0x18bbf6=_0x3b8a68+','+_0x4c2ab3+','+_0x52e3b4,_0x1082f0=['-y','-f',_0x50cd7d(0xeb),'-i','color=c=black:s=512x512:d='+_0x35cdc0+_0x50cd7d(0xe7),'-vf',_0x18bbf6,_0x50cd7d(0xf2),_0x50cd7d(0xf5),_0x50cd7d(0xf4),_0x50cd7d(0xf0),_0x50cd7d(0xdb),_0x50cd7d(0xda),'-t',String(_0x35cdc0),'-f',_0x50cd7d(0x104),_0x50cd7d(0x100)],_0x3d1e2b=spawn(_0x50cd7d(0x109),_0x1082f0),_0x169f3d=[],_0x47a739=[];_0x3d1e2b['stdout']['on'](_0x50cd7d(0xd5),_0x45de95=>_0x169f3d[_0x50cd7d(0xea)](_0x45de95)),_0x3d1e2b[_0x50cd7d(0xf6)]['on'](_0x50cd7d(0xd5),_0x5a2f94=>_0x47a739[_0x50cd7d(0xea)](_0x5a2f94)),_0x3d1e2b['on'](_0x50cd7d(0xf7),_0x1af15a),_0x3d1e2b['on']('close',_0x294f08=>{const _0x43bebe=_0x50cd7d;if(_0x294f08===0x0)return _0x591411(Buffer[_0x43bebe(0xd3)](_0x169f3d));_0x1af15a(new Error(Buffer[_0x43bebe(0xd3)](_0x47a739)[_0x43bebe(0xff)]()||_0x43bebe(0xd4)+_0x294f08));});});}