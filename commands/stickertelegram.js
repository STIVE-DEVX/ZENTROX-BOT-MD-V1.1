const _0x43be11=_0x2a88;function _0x5568(){const _0x4f75f0=['ffmpeg\x20-i\x20\x22','7801479976:AAGuPL0a7kXXBYz6XUSR_ll2SR5V_W6oHl4','Invalid\x20sticker\x20pack\x20or\x20API\x20response','match','Error\x20processing\x20sticker\x20','HTTP\x20error!\x20status:\x20','error','emoji','json','115NAxvLk','mkdirSync','408gXSJLB','exports','41618580mqseJp','1AkCkHf','stickers','Error\x20in\x20stickertelegram\x20command:','98399FxnSTj','buffer','unlinkSync','path','.webp','\x20stickers!','9fbcXOO','sendMessage','file_path','/getFile?file_id=','hex','279516xrBvnm','node-webpmux','writeUIntLE','length','is_animated','Mozilla/5.0','load','temp_','status','\x22\x20-vf\x20\x22scale=512:512:force_original_aspect_ratio=decrease,fps=15,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000\x22\x20-c:v\x20libwebp\x20-preset\x20default\x20-loop\x200\x20-vsync\x200\x20-pix_fmt\x20yuva420p\x20-quality\x2075\x20-compression_level\x206\x20\x22','6657993UKybiV','file_id','application/json','‚ùå\x20Invalid\x20URL!\x20Make\x20sure\x20it\x27s\x20a\x20Telegram\x20sticker\x20URL.','https://api.telegram.org/file/bot','1601734khDWSP','sharp','result','sticker_','6650567ZrucVV','10BzpGIC','‚ùå\x20Failed\x20to\x20process\x20Telegram\x20stickers!\x0aMake\x20sure:\x0a1.\x20The\x20URL\x20is\x20correct\x0a2.\x20The\x20sticker\x20pack\x20exists\x0a3.\x20The\x20sticker\x20pack\x20is\x20public','now','13FCxiDx','tmp','utf8','/getStickerSet?name=','message','‚ö†Ô∏è\x20Please\x20enter\x20the\x20Telegram\x20sticker\x20URL!\x0a\x0aExample:\x20.tg\x20https://t.me/addstickers/Porcientoreal','slice','‚úÖ\x20Successfully\x20downloaded\x20','FFmpeg\x20error:','save','https://t.me/addstickers/','üì¶\x20Found\x20','split','Failed\x20to\x20process\x20sticker\x20pack:\x20','cwd','join','https://api.telegram.org/bot','exif','106062KchfXE','node-fetch','text','crypto','packname','extendedTextMessage'];_0x5568=function(){return _0x4f75f0;};return _0x5568();}(function(_0x2d7945,_0x907313){const _0x27120c=_0x2a88,_0x46a502=_0x2d7945();while(!![]){try{const _0x55df8c=-parseInt(_0x27120c(0x95))/0x1*(parseInt(_0x27120c(0x67))/0x2)+parseInt(_0x27120c(0x9e))/0x3*(parseInt(_0x27120c(0xa3))/0x4)+-parseInt(_0x27120c(0x90))/0x5*(parseInt(_0x27120c(0x81))/0x6)+-parseInt(_0x27120c(0x98))/0x7*(parseInt(_0x27120c(0x92))/0x8)+parseInt(_0x27120c(0xad))/0x9*(-parseInt(_0x27120c(0x6c))/0xa)+-parseInt(_0x27120c(0x6b))/0xb+-parseInt(_0x27120c(0x94))/0xc*(-parseInt(_0x27120c(0x6f))/0xd);if(_0x55df8c===_0x907313)break;else _0x46a502['push'](_0x46a502['shift']());}catch(_0x15778b){_0x46a502['push'](_0x46a502['shift']());}}}(_0x5568,0x63e2d));const fetch=require(_0x43be11(0x82)),{writeExifImg}=require('../lib/exif'),delay=_0x34d702=>new Promise(_0x3048f4=>setTimeout(_0x3048f4,_0x34d702)),fs=require('fs'),path=require(_0x43be11(0x9b)),sharp=require(_0x43be11(0x68)),webp=require(_0x43be11(0xa4)),crypto=require(_0x43be11(0x84)),{exec}=require('child_process'),settings=require('../settings');async function stickerTelegramCommand(_0x10b62c,_0x10d02b,_0x4f71ec){const _0x4aa7a5=_0x43be11;try{const _0x19cb7e=_0x4f71ec[_0x4aa7a5(0x73)]?.['conversation']?.['trim']()||_0x4f71ec[_0x4aa7a5(0x73)]?.[_0x4aa7a5(0x86)]?.[_0x4aa7a5(0x83)]?.['trim']()||'',_0x358fe7=_0x19cb7e[_0x4aa7a5(0x7b)]('\x20')[_0x4aa7a5(0x75)](0x1);if(!_0x358fe7[0x0]){await _0x10b62c[_0x4aa7a5(0x9f)](_0x10d02b,{'text':_0x4aa7a5(0x74)});return;}if(!_0x358fe7[0x0][_0x4aa7a5(0x8a)](/(https:\/\/t.me\/addstickers\/)/gi)){await _0x10b62c[_0x4aa7a5(0x9f)](_0x10d02b,{'text':_0x4aa7a5(0x65)});return;}const _0xe979ff=_0x358fe7[0x0]['replace'](_0x4aa7a5(0x79),''),_0x53c118=_0x4aa7a5(0x88);try{const _0x574f1a=await fetch(_0x4aa7a5(0x7f)+_0x53c118+_0x4aa7a5(0x72)+encodeURIComponent(_0xe979ff),{'method':'GET','headers':{'Accept':_0x4aa7a5(0xaf),'User-Agent':_0x4aa7a5(0xa8)}});if(!_0x574f1a['ok'])throw new Error(_0x4aa7a5(0x8c)+_0x574f1a[_0x4aa7a5(0xab)]);const _0x4a77c4=await _0x574f1a['json']();if(!_0x4a77c4['ok']||!_0x4a77c4[_0x4aa7a5(0x69)])throw new Error(_0x4aa7a5(0x89));await _0x10b62c[_0x4aa7a5(0x9f)](_0x10d02b,{'text':_0x4aa7a5(0x7a)+_0x4a77c4['result'][_0x4aa7a5(0x96)][_0x4aa7a5(0xa6)]+'\x20stickers\x0a‚è≥\x20Starting\x20download...'});const _0x44e52c=path[_0x4aa7a5(0x7e)](process[_0x4aa7a5(0x7d)](),_0x4aa7a5(0x70));!fs['existsSync'](_0x44e52c)&&fs[_0x4aa7a5(0x91)](_0x44e52c,{'recursive':!![]});let _0x1a19f8=0x0;for(let _0x1478e1=0x0;_0x1478e1<_0x4a77c4[_0x4aa7a5(0x69)]['stickers'][_0x4aa7a5(0xa6)];_0x1478e1++){try{const _0xe1bf21=_0x4a77c4[_0x4aa7a5(0x69)][_0x4aa7a5(0x96)][_0x1478e1],_0x52f130=_0xe1bf21[_0x4aa7a5(0xae)],_0x2d2559=await fetch(_0x4aa7a5(0x7f)+_0x53c118+_0x4aa7a5(0xa1)+_0x52f130);if(!_0x2d2559['ok'])continue;const _0x10016d=await _0x2d2559[_0x4aa7a5(0x8f)]();if(!_0x10016d['ok']||!_0x10016d[_0x4aa7a5(0x69)][_0x4aa7a5(0xa0)])continue;const _0x13e8b8=_0x4aa7a5(0x66)+_0x53c118+'/'+_0x10016d[_0x4aa7a5(0x69)][_0x4aa7a5(0xa0)],_0x141b61=await fetch(_0x13e8b8),_0x17723e=await _0x141b61[_0x4aa7a5(0x99)](),_0x5a1620=path[_0x4aa7a5(0x7e)](_0x44e52c,_0x4aa7a5(0xaa)+Date['now']()+'_'+_0x1478e1),_0x1bad48=path[_0x4aa7a5(0x7e)](_0x44e52c,_0x4aa7a5(0x6a)+Date[_0x4aa7a5(0x6e)]()+'_'+_0x1478e1+_0x4aa7a5(0x9c));fs['writeFileSync'](_0x5a1620,_0x17723e);const _0xec6bcd=_0xe1bf21[_0x4aa7a5(0xa7)]||_0xe1bf21['is_video'],_0x2c2c99=_0xec6bcd?'ffmpeg\x20-i\x20\x22'+_0x5a1620+_0x4aa7a5(0xac)+_0x1bad48+'\x22':_0x4aa7a5(0x87)+_0x5a1620+'\x22\x20-vf\x20\x22scale=512:512:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000\x22\x20-c:v\x20libwebp\x20-preset\x20default\x20-loop\x200\x20-vsync\x200\x20-pix_fmt\x20yuva420p\x20-quality\x2075\x20-compression_level\x206\x20\x22'+_0x1bad48+'\x22';await new Promise((_0x2714df,_0x33c079)=>{exec(_0x2c2c99,_0x14f9d7=>{const _0x22e446=_0x2a88;if(_0x14f9d7)console[_0x22e446(0x8d)](_0x22e446(0x77),_0x14f9d7),_0x33c079(_0x14f9d7);else _0x2714df();});});const _0x36c3f9=fs['readFileSync'](_0x1bad48),_0x5876c0=new webp['Image']();await _0x5876c0[_0x4aa7a5(0xa9)](_0x36c3f9);const _0x31f9bf={'sticker-pack-id':crypto['randomBytes'](0x20)['toString'](_0x4aa7a5(0xa2)),'sticker-pack-name':settings[_0x4aa7a5(0x85)],'emojis':_0xe1bf21[_0x4aa7a5(0x8e)]?[_0xe1bf21[_0x4aa7a5(0x8e)]]:['ü§ñ']},_0x70c943=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x22cddc=Buffer['from'](JSON['stringify'](_0x31f9bf),_0x4aa7a5(0x71)),_0x18b89a=Buffer['concat']([_0x70c943,_0x22cddc]);_0x18b89a[_0x4aa7a5(0xa5)](_0x22cddc[_0x4aa7a5(0xa6)],0xe,0x4),_0x5876c0[_0x4aa7a5(0x80)]=_0x18b89a;const _0x53a5ae=await _0x5876c0[_0x4aa7a5(0x78)](null);await _0x10b62c[_0x4aa7a5(0x9f)](_0x10d02b,{'sticker':_0x53a5ae}),_0x1a19f8++,await delay(0x3e8);try{fs[_0x4aa7a5(0x9a)](_0x5a1620),fs[_0x4aa7a5(0x9a)](_0x1bad48);}catch(_0x3a4fc3){console[_0x4aa7a5(0x8d)]('Error\x20cleaning\x20up\x20temp\x20files:',_0x3a4fc3);}}catch(_0x1a0a48){console['error'](_0x4aa7a5(0x8b)+_0x1478e1+':',_0x1a0a48);continue;}}await _0x10b62c[_0x4aa7a5(0x9f)](_0x10d02b,{'text':_0x4aa7a5(0x76)+_0x1a19f8+'/'+_0x4a77c4[_0x4aa7a5(0x69)]['stickers'][_0x4aa7a5(0xa6)]+_0x4aa7a5(0x9d)});}catch(_0x2089f8){throw new Error(_0x4aa7a5(0x7c)+_0x2089f8[_0x4aa7a5(0x73)]);}}catch(_0x1b592c){console[_0x4aa7a5(0x8d)](_0x4aa7a5(0x97),_0x1b592c),await _0x10b62c[_0x4aa7a5(0x9f)](_0x10d02b,{'text':_0x4aa7a5(0x6d)});}}function _0x2a88(_0x77fe7b,_0x23b4a0){_0x77fe7b=_0x77fe7b-0x65;const _0x55681a=_0x5568();let _0x2a886d=_0x55681a[_0x77fe7b];return _0x2a886d;}module[_0x43be11(0x93)]=stickerTelegramCommand;