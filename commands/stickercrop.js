const _0x459b41=_0x2f41;function _0x2f41(_0xf92451,_0x43fefc){_0xf92451=_0xf92451-0x10a;const _0x4ea462=_0x4ea4();let _0x2f41ed=_0x4ea462[_0xf92451];return _0x2f41ed;}(function(_0x3c5bf8,_0x575034){const _0x317adf=_0x2f41,_0x35e1a4=_0x3c5bf8();while(!![]){try{const _0x5cb06c=-parseInt(_0x317adf(0x141))/0x1*(parseInt(_0x317adf(0x10c))/0x2)+-parseInt(_0x317adf(0x13e))/0x3+parseInt(_0x317adf(0x138))/0x4*(parseInt(_0x317adf(0x119))/0x5)+-parseInt(_0x317adf(0x157))/0x6+parseInt(_0x317adf(0x134))/0x7*(parseInt(_0x317adf(0x122))/0x8)+-parseInt(_0x317adf(0x132))/0x9*(parseInt(_0x317adf(0x13b))/0xa)+parseInt(_0x317adf(0x147))/0xb;if(_0x5cb06c===_0x575034)break;else _0x35e1a4['push'](_0x35e1a4['shift']());}catch(_0x565c3c){_0x35e1a4['push'](_0x35e1a4['shift']());}}}(_0x4ea4,0x43687));const {downloadMediaMessage}=require('@whiskeysockets/baileys'),{exec}=require('child_process'),fs=require('fs'),path=require('path'),settings=require(_0x459b41(0x137)),webp=require(_0x459b41(0x159)),crypto=require(_0x459b41(0x124));async function stickercropCommand(_0xe4fce0,_0x1591fd,_0x544256){const _0x1582fa=_0x459b41,_0x37d91b=_0x544256;let _0x103954=_0x544256;if(_0x544256[_0x1582fa(0x13c)]?.[_0x1582fa(0x142)]?.[_0x1582fa(0x14c)]?.['quotedMessage']){const _0x2c0ac1=_0x544256[_0x1582fa(0x13c)]['extendedTextMessage'][_0x1582fa(0x14c)];_0x103954={'key':{'remoteJid':_0x1591fd,'id':_0x2c0ac1['stanzaId'],'participant':_0x2c0ac1[_0x1582fa(0x148)]},'message':_0x2c0ac1[_0x1582fa(0x13f)]};}const _0xb98558=_0x103954[_0x1582fa(0x13c)]?.[_0x1582fa(0x155)]||_0x103954[_0x1582fa(0x13c)]?.[_0x1582fa(0x158)]||_0x103954[_0x1582fa(0x13c)]?.['documentMessage']||_0x103954[_0x1582fa(0x13c)]?.[_0x1582fa(0x11c)];if(!_0xb98558){await _0xe4fce0[_0x1582fa(0x140)](_0x1591fd,{'text':_0x1582fa(0x115),'contextInfo':{'forwardingScore':0x3e7,'isForwarded':!![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x1582fa(0x144),'newsletterName':'ZENTROX\x20MD','serverMessageId':-0x1}}},{'quoted':_0x37d91b});return;}try{const _0x2541cf=await downloadMediaMessage(_0x103954,_0x1582fa(0x11e),{},{'logger':undefined,'reuploadRequest':_0xe4fce0['updateMediaMessage']});if(!_0x2541cf){await _0xe4fce0['sendMessage'](_0x1591fd,{'text':_0x1582fa(0x11b),'contextInfo':{'forwardingScore':0x3e7,'isForwarded':!![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x1582fa(0x144),'newsletterName':_0x1582fa(0x116),'serverMessageId':-0x1}}});return;}const _0x4a7f43=path[_0x1582fa(0x13d)](process[_0x1582fa(0x14f)](),'tmp');!fs[_0x1582fa(0x114)](_0x4a7f43)&&fs[_0x1582fa(0x153)](_0x4a7f43,{'recursive':!![]});const _0x5c273c=path[_0x1582fa(0x13d)](_0x4a7f43,_0x1582fa(0x14e)+Date['now']()),_0x4610c6=path[_0x1582fa(0x13d)](_0x4a7f43,_0x1582fa(0x111)+Date['now']()+_0x1582fa(0x146));fs[_0x1582fa(0x12f)](_0x5c273c,_0x2541cf);const _0x2cd5cd=_0xb98558[_0x1582fa(0x133)]?.[_0x1582fa(0x12b)](_0x1582fa(0x10a))||_0xb98558['mimetype']?.[_0x1582fa(0x12b)](_0x1582fa(0x11f))||_0xb98558[_0x1582fa(0x112)]>0x0,_0x3642e2=_0x2541cf['length']/0x400,_0xd7d08c=_0x3642e2>0x1388;let _0x8445f7;_0x2cd5cd?_0xd7d08c?_0x8445f7='ffmpeg\x20-i\x20\x22'+_0x5c273c+_0x1582fa(0x14a)+_0x4610c6+'\x22':_0x8445f7='ffmpeg\x20-i\x20\x22'+_0x5c273c+_0x1582fa(0x12c)+_0x4610c6+'\x22':_0x8445f7=_0x1582fa(0x135)+_0x5c273c+_0x1582fa(0x12a)+_0x4610c6+'\x22';await new Promise((_0x2814aa,_0x2dda2c)=>{exec(_0x8445f7,(_0x20105f,_0x27183f,_0x238b56)=>{const _0x11fc55=_0x2f41;_0x20105f?(console['error'](_0x11fc55(0x143),_0x20105f),console[_0x11fc55(0x145)]('FFmpeg\x20stderr:',_0x238b56),_0x2dda2c(_0x20105f)):(console['log'](_0x11fc55(0x152),_0x27183f),_0x2814aa());});});if(!fs[_0x1582fa(0x114)](_0x4610c6))throw new Error(_0x1582fa(0x149));const _0x156457=fs[_0x1582fa(0x12d)](_0x4610c6);if(_0x156457[_0x1582fa(0x11d)]===0x0)throw new Error(_0x1582fa(0x125));let _0x19918d=fs[_0x1582fa(0x10b)](_0x4610c6);const _0x17d741=_0x19918d['length']/0x400;console[_0x1582fa(0x154)](_0x1582fa(0x10d)+Math[_0x1582fa(0x120)](_0x17d741)+_0x1582fa(0x139));_0x17d741>0x3e8&&console[_0x1582fa(0x154)](_0x1582fa(0x129)+Math[_0x1582fa(0x120)](_0x17d741)+'\x20KB)\x20exceeds\x20recommended\x20limit\x20but\x20will\x20be\x20sent\x20anyway');const _0x3aba0d=new webp[(_0x1582fa(0x110))]();await _0x3aba0d[_0x1582fa(0x150)](_0x19918d);const _0x1227cc={'sticker-pack-id':crypto[_0x1582fa(0x11a)](0x20)[_0x1582fa(0x14d)]('hex'),'sticker-pack-name':settings['packname']||_0x1582fa(0x130),'emojis':['✂️']},_0x52e7bf=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x5b50ff=Buffer['from'](JSON[_0x1582fa(0x126)](_0x1227cc),_0x1582fa(0x12e)),_0x4f60c0=Buffer[_0x1582fa(0x128)]([_0x52e7bf,_0x5b50ff]);_0x4f60c0[_0x1582fa(0x127)](_0x5b50ff['length'],0xe,0x4),_0x3aba0d['exif']=_0x4f60c0;const _0x406236=await _0x3aba0d[_0x1582fa(0x118)](null);await _0xe4fce0[_0x1582fa(0x140)](_0x1591fd,{'sticker':_0x406236},{'quoted':_0x37d91b});try{fs[_0x1582fa(0x113)](_0x5c273c),fs['unlinkSync'](_0x4610c6);}catch(_0x316920){console[_0x1582fa(0x145)](_0x1582fa(0x117),_0x316920);}}catch(_0x4957fe){console[_0x1582fa(0x145)]('Error\x20in\x20stickercrop\x20command:',_0x4957fe),await _0xe4fce0[_0x1582fa(0x140)](_0x1591fd,{'text':'Failed\x20to\x20crop\x20sticker!\x20Try\x20with\x20an\x20image.','contextInfo':{'forwardingScore':0x3e7,'isForwarded':!![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x1582fa(0x144),'newsletterName':_0x1582fa(0x116),'serverMessageId':-0x1}}});}}module[_0x459b41(0x10f)]=stickercropCommand;function _0x4ea4(){const _0x5a7dff=['18wuRovd','mimetype','14AuOvoa','ffmpeg\x20-i\x20\x22','stickercropFromBuffer','../settings','264468PSMZiI','\x20KB','hex','862470gcJcob','message','join','859689pOaBqo','quotedMessage','sendMessage','2viysWK','extendedTextMessage','FFmpeg\x20error:','120363401545196668@newsletter','error','.webp','3173885lmolEY','participant','FFmpeg\x20failed\x20to\x20create\x20output\x20file','\x22\x20-t\x202\x20-vf\x20\x22crop=min(iw\x5c,ih):min(iw\x5c,ih),scale=512:512,fps=8\x22\x20-c:v\x20libwebp\x20-preset\x20default\x20-loop\x200\x20-vsync\x200\x20-pix_fmt\x20yuva420p\x20-quality\x2030\x20-compression_level\x206\x20-b:v\x20100k\x20-max_muxing_queue_size\x201024\x20\x22','packname','contextInfo','toString','temp_','cwd','load','KnightBot','FFmpeg\x20stdout:','mkdirSync','log','imageMessage','from','614274GDgQSO','videoMessage','node-webpmux','gif','readFileSync','158644vFUBNi','Final\x20sticker\x20size:\x20','exif','exports','Image','crop_','seconds','unlinkSync','existsSync','Please\x20reply\x20to\x20an\x20image/video/sticker\x20with\x20.crop,\x20or\x20send\x20an\x20image/video/sticker\x20with\x20.crop\x20as\x20the\x20caption.','ZENTROX\x20MD','Error\x20cleaning\x20up\x20temp\x20files:','save','30SCPXrf','randomBytes','Failed\x20to\x20download\x20media.\x20Please\x20try\x20again.','stickerMessage','size','buffer','video','round','cropbuf_out_','1243784NipGZG','tmp','crypto','FFmpeg\x20created\x20empty\x20output\x20file','stringify','writeUIntLE','concat','⚠️\x20Warning:\x20Sticker\x20size\x20(','\x22\x20-vf\x20\x22crop=min(iw\x5c,ih):min(iw\x5c,ih),scale=512:512,format=rgba\x22\x20-c:v\x20libwebp\x20-preset\x20default\x20-loop\x200\x20-vsync\x200\x20-pix_fmt\x20yuva420p\x20-quality\x2075\x20-compression_level\x206\x20\x22','includes','\x22\x20-t\x203\x20-vf\x20\x22crop=min(iw\x5c,ih):min(iw\x5c,ih),scale=512:512,fps=12\x22\x20-c:v\x20libwebp\x20-preset\x20default\x20-loop\x200\x20-vsync\x200\x20-pix_fmt\x20yuva420p\x20-quality\x2050\x20-compression_level\x206\x20-b:v\x20150k\x20-max_muxing_queue_size\x201024\x20\x22','statSync','utf8','writeFileSync','ZENTROX','cropbuf_'];_0x4ea4=function(){return _0x5a7dff;};return _0x4ea4();}async function stickercropFromBuffer(_0xb74eb2,_0x234bee){const _0x10dc0e=_0x459b41,_0x838dcf=path['join'](process[_0x10dc0e(0x14f)](),_0x10dc0e(0x123));if(!fs['existsSync'](_0x838dcf))fs[_0x10dc0e(0x153)](_0x838dcf,{'recursive':!![]});const _0x56fda2=path['join'](_0x838dcf,_0x10dc0e(0x131)+Date['now']()),_0x5545a4=path[_0x10dc0e(0x13d)](_0x838dcf,_0x10dc0e(0x121)+Date['now']()+'.webp');fs[_0x10dc0e(0x12f)](_0x56fda2,_0xb74eb2);const _0x18ddec=_0xb74eb2['length']/0x400,_0x16670a=_0x18ddec>0x1388;let _0x1f6acd;_0x234bee?_0x16670a?_0x1f6acd='ffmpeg\x20-y\x20-i\x20\x22'+_0x56fda2+'\x22\x20-t\x202\x20-vf\x20\x22crop=min(iw\x5c,ih):min(iw\x5c,ih),scale=512:512,fps=8\x22\x20-c:v\x20libwebp\x20-preset\x20default\x20-loop\x200\x20-vsync\x200\x20-pix_fmt\x20yuva420p\x20-quality\x2030\x20-compression_level\x206\x20-b:v\x20100k\x20-max_muxing_queue_size\x201024\x20\x22'+_0x5545a4+'\x22':_0x1f6acd='ffmpeg\x20-y\x20-i\x20\x22'+_0x56fda2+_0x10dc0e(0x12c)+_0x5545a4+'\x22':_0x1f6acd='ffmpeg\x20-y\x20-i\x20\x22'+_0x56fda2+_0x10dc0e(0x12a)+_0x5545a4+'\x22';await new Promise((_0x44fdfb,_0x5d66e0)=>{exec(_0x1f6acd,_0x8b25e0=>{if(_0x8b25e0)return _0x5d66e0(_0x8b25e0);_0x44fdfb();});});const _0x23a5f8=fs[_0x10dc0e(0x10b)](_0x5545a4),_0x489306=new webp['Image']();await _0x489306[_0x10dc0e(0x150)](_0x23a5f8);const _0x2da67a={'sticker-pack-id':crypto[_0x10dc0e(0x11a)](0x20)['toString'](_0x10dc0e(0x13a)),'sticker-pack-name':settings[_0x10dc0e(0x14b)]||_0x10dc0e(0x151),'emojis':['✂️']},_0x266034=Buffer[_0x10dc0e(0x156)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x4510c6=Buffer[_0x10dc0e(0x156)](JSON[_0x10dc0e(0x126)](_0x2da67a),_0x10dc0e(0x12e)),_0x1df8a9=Buffer[_0x10dc0e(0x128)]([_0x266034,_0x4510c6]);_0x1df8a9[_0x10dc0e(0x127)](_0x4510c6['length'],0xe,0x4),_0x489306[_0x10dc0e(0x10e)]=_0x1df8a9;const _0x42257=await _0x489306[_0x10dc0e(0x118)](null);try{fs['unlinkSync'](_0x56fda2),fs[_0x10dc0e(0x113)](_0x5545a4);}catch{}return _0x42257;}module[_0x459b41(0x10f)][_0x459b41(0x136)]=stickercropFromBuffer;